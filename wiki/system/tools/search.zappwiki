{"title":"Search","text":"<input class='headerInput' style='width:100%' id='searchBox'></input>\n<BR><input type='checkbox' id='onlyZappwiki'> Only Zappwiki files</input>\n<BR>Filter Fields: <input type='text' id='filter'></input>\n<BR>\n<BR>\n<button class='btn btn-default' onclick='processSearch()'>Search</button>\n<hr>\n<div id='out'>\n</div>","type":"zappwiki","timestamp":1510976782894,"locked":false,"include":"/system/lib/search.js","preload":"var results = []\n\nfunction processSearch() {\n  \tvar input = document.getElementById(\"searchBox\").value;\n\tvar onlyZappwiki = document.getElementById(\"onlyZappwiki\").checked\n\tvar filter = document.getElementById(\"filter\").value\n\tvar options = {}\n\n\tif (filter.search(/\\S/) != -1) {\nfilter = filter.split(\" \")\n\t\toptions.allFields = false\n\t\toptions.fields = filter\n\t}\n\t\n\tif (onlyZappwiki) {\n\t\toptions.allExtensions = false\n\t\toptions.extensions = [\"zappwiki\"]\n\t}\t\n\tvar search = new WikiSearch(input,options)\n    results = []\n  \tsearch.on(\"result\",function(result) {\n    \tresults.push(result)\n     \tresults.sort(function(a,b) {return b.numMatches-a.numMatches})\n      \tdocument.getElementById(\"out\").innerHTML = \"<i>Searching... found \"+results.length+\" results</i>\"\n    })\n  \tsearch.on(\"end\",function() {\n    \tresults.sort(function(a,b) {return b.numMatches-a.numMatches})\n      \tprintResults();\n    })\n  \tsearch.start();\n\tdocument.getElementById(\"out\").innerHTML = \"<i>Searching... found 0 results</i>\"\n}\n\nfunction printResults() {\n  \tvar html = \"<i>Found \"+results.length+\" result\"+(results.length == 1 ? \"\" : \"s\")+\"</i>\"\n\tfor (var i = 0; i <results.length; i++) {\n      \tvar result = results[i]\n    \thtml += \"<BR><a href='/\"+result.path+\"'>\"+result.name+\"</a>\"\n    }\n  \tdocument.getElementById(\"out\").innerHTML = html;\n}\n","format":"ZWP v3"}